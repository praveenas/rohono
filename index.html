<!DOCTYPE HTML>
<html>
<head>
  <script src="https://code.jquery.com/jquery-1.12.4.min.js"
          integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
          integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
          integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
          crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/gh/mathusummut/confetti.js/confetti.min.js"></script>
  <script src="./scripts/common.js"></script>
  <link rel="stylesheet" href="./css/rohono.css">
  <script>
    var synth = window.speechSynthesis;
    var initialized = false;
    $(function () {
      var objects = ['ball', 'book', 'pretzel', 'lollipop', 'gummy', 'candy', 'bottle', 'apple', 'cupcake', 'pizza', 'block', 'backpack',
                     'banana', 'boat', 'crayon', 'icecream', 'pen', 'brush', 'flower', 'frenchfries'
      ];
      $('#playagain').click(function () {
        play();
      });
      $('#first').click(function () {
        speak("Let's play");
        $('#first').hide();
        play();
      });
      function dismiss() {
        $("#playagain").show();
      }
      function play() {
        $("#playagain").hide();
        $("#game").show();
        $('#spanObject').html("");

        var url = new URL(window.location);
        var object = url.searchParams.get("object") || objects[Math.floor(Math.random() * objects.length)];

        $(".objectText").text(object);

        var image = '<img id=object width="50px" height="50px" style="z-index:1"' + 'src="./images/objects/' + object + '.svg">';
        $('#spanObject').append(image);

        $('#object').draggable({
          cursor: "crosshair",
          revert: 'invalid'
        });
        $('#boyimage').attr("src", "./images/boy.svg");
        $('#girlimage').attr("src", "./images/girl.svg");


        var persons = ['boy', 'girl'];
        var personIndex = Math.floor(Math.random() * 2);
        var person = persons[personIndex];
        $(".personText").text(person);

        $(".btn-" + person).click(function () {
          dismiss();
        });

        $('#sd').click(function () {
          speak("Give the " + $(".objectText").text() + " to the " + $(".personText").text());
        });

        $("#" + person).droppable({
          //activeClass: "hint",
          drop: function (event, ui) {
            confetti.start(1000);
            $("#" + person).droppable('disable');
            speak("The " + person + " has the " + $(".objectText").text(), dismiss);
          }
        });

        $("#" + person).droppable('enable');
      }

      $("#game").hide();
      $("#first").show();

    });

  </script>
</head>
<body>
<div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
  <header class="masthead mb-auto">
    <div class="inner">
      <nav class="nav nav-masthead justify-content-center">
        <a class="nav-link active" href="#">Home</a>
        <a class="nav-link" href="./math.html">Math</a>
        <a class="nav-link" href="./counting.html">Counting</a>
        <a class="nav-link" href="./spelling.html">Spelling</a>
      </nav>
    </div>
  </header>
  <main role="main" class="inner cover">
    <div class="padding-top">
      <button id="first" type="button" class="btn btn-lg">
        <h1 class="cover-heading"> Play </h1>
      </button>
    </div>
    <div id="game">
      <div class="row">
        <h1>
          <svg id="sd" class="bi bi-volume-up" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
               xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd"
                  d="M6.717 3.55A.5.5 0 017 4v8a.5.5 0 01-.812.39L3.825 10.5H1.5A.5.5 0 011 10V6a.5.5 0 01.5-.5h2.325l2.363-1.89a.5.5 0 01.529-.06zM6 5.04L4.312 6.39A.5.5 0 014 6.5H2v3h2a.5.5 0 01.312.11L6 10.96V5.04z"
                  clip-rule="evenodd"></path>
            <path
                d="M11.536 14.01A8.473 8.473 0 0014.026 8a8.473 8.473 0 00-2.49-6.01l-.708.707A7.476 7.476 0 0113.025 8c0 2.071-.84 3.946-2.197 5.303l.708.707z"></path>
            <path
                d="M10.121 12.596A6.48 6.48 0 0012.025 8a6.48 6.48 0 00-1.904-4.596l-.707.707A5.483 5.483 0 0111.025 8a5.483 5.483 0 01-1.61 3.89l.706.706z"></path>
            <path
                d="M8.707 11.182A4.486 4.486 0 0010.025 8a4.486 4.486 0 00-1.318-3.182L8 5.525A3.489 3.489 0 019.025 8 3.49 3.49 0 018 10.475l.707.707z"></path>
          </svg>
          Give the <span class="objectText"></span> to the <span class="red personText"></span>
          <span id="spanObject"></span>
        </h1>
      </div>
      <div class="row person">
        <div id="boy" class="boy">
          <img id="boyimage">
        </div>
        <div id="girl" class="girl">
          <img id="girlimage">
        </div>
        <div class="play">
          <button id="playagain" type="button" class="btn btn-lg">
            <svg class="bi bi-play-fill" width="5em" height="5em" viewBox="0 0 16 16" fill="currentColor"
                 xmlns="http://www.w3.org/2000/svg">
              <path
                  d="M11.596 8.697l-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 010 1.393z"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </main>
</div>
</body>
</html>